<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Nefrikinoso - CKD Prediction</title>

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">

    <style>
        :root {
            --primary-color: #20c997;
            --secondary-color: #f8f9fa;
            --accent-color: #28a745;
            --text-dark: #343a40;
            --heading-dark: #212529;
            --border-color: #dee2e6;
            --danger-color: #dc3545;
            --success-color: #28a745;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-dark);
            line-height: 1.6;
        }

        h1,
        h2,
        h3 {
            font-weight: 700;
            color: var(--heading-dark);
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            font-weight: 600;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #18a680;
            border-color: #18a680;
        }

        .container {
            max-width: 960px;
        }

        .footer {
            margin-top: 3rem;
            padding: 2rem 0;
            text-align: center;
            color: #6c757d;
            border-top: 1px solid var(--border-color);
        }

        .upload-card {
            border: 2px dashed var(--primary-color);
            border-radius: 0.5rem;
            padding: 3rem;
            text-align: center;
            background-color: #fff;
            transition: background-color 0.3s;
        }

        .upload-card:hover {
            background-color: #f1fef9;
        }

        .result-card {
            border-left-width: 5px;
            border-left-style: solid;
        }

        .result-card.ckd {
            border-left-color: var(--danger-color);
        }

        .result-card.no-ckd {
            border-left-color: var(--success-color);
        }

        .result-card.error {
            border-left-color: #ffc107;
        }
    </style>
</head>

<body>
    <div class="container text-center mt-4">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="img-fluid" style="max-width: 180px;" />
        <h1 class="mt-3">Nefrikinoso</h1>
        <p class="lead">AI-Powered Chronic Kidney Disease (CKD) Prediction from Medical Reports</p>
    </div>

    <!-- PDF Upload Form -->
    <div class="container mt-4">
        <form method="POST" action="/" enctype="multipart/form-data">
            <div class="card upload-card">
                <div class="card-body">
                    <h3 class="card-title">Upload Medical Reports</h3>
                    <p class="text-muted">Select one or more PDF files for analysis.</p>
                    <div class="form-group mt-4">
                        <input type="file" class="form-control-file" name="pdf_files" id="pdf_files" accept=".pdf"
                            multiple required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg mt-3">Get Predictions</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Prediction Results -->
    <div class="container mt-5">
        {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
        {% endif %}

        {% if predictions %}
        <h2>Analysis Results</h2>
        {% for result in predictions %}
        <div class="card mb-3 result-card {% if result.conclusion == 'CKD' %}ckd{% elif result.conclusion == 'notckd' %}no-ckd{% else %}error{% endif %}">
            <div class="card-header d-flex justify-content-between align-items-center">
                <strong>{{ result.filename }}</strong>
                {% if result.conclusion == 'CKD' %}
                <span class="badge badge-danger">CKD Detected</span>
                {% elif result.conclusion == 'notckd' %}
                <span class="badge badge-success">No CKD Detected</span>
                {% else %}
                <span class="badge badge-warning">Processing Error</span>
                {% endif %}
            </div>
            <div class="card-body">
                {% if result.error %}
                <p class="card-text text-danger"><strong>Error:</strong> {{ result.error }}</p>
                {% else %}
                <p class="card-text">The model's prediction based on the extracted data is complete.</p>
                <!-- Optional: Display extracted data if needed -->
                <!-- 
                            <h6>Extracted Data:</h6>
                            <pre><code>{{ result.data | tojson(indent=2) }}</code></pre> 
                            -->
                {% endif %}
            </div>
        </div>
        {% endfor %}
        {% endif %}
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Soham Kulkarni, Riddhi Poddar, Janhavi Doijad. Licensed under GNU-GPLv3.</p>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>
